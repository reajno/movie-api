<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IFQ716 Client</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="nav justify-content-center py-4">
      <form id="form" class="d-flex align-items-center gap-2">
        <label for="movieSearch">
          <input
            type="text"
            name="movieSearch"
            id="movieSearch"
            class="form-control"
            placeholder="Search..."
          />
        </label>
        <button type="submit" class="btn btn-primary">Find Movie</button>
      </form>
    </div>
    <main class=" container py-4 d-flex flex-column gap-4 align-items-center">
      <!--  RENDER BUTTON ONCE INDIVIDUAL MOVIE IS CLICKED -->
      <div>
        <button class="btn btn-success me-3">Show Poster</button>
        <button class="btn btn-warning">Upload New Poster</button>
      </div>
      <!-- RENDER TABLE ONCE SEARCH DATA RECEIVED -->
      <table class="table table-hover table-dark w-75">
        <tbody>
          <tr>
            <th>Title</th>
            <td class="movie-title">Star Wars: Episode IV - A New Hope</td>
          </tr>
          <tr>
            <th>Year</th>
            <td class="movie-year">1977</td>
          </tr>
          <tr>
            <th>Rated</th>
            <td class="movie-rated">PG</td>
          </tr>
          <tr>
            <th>Genre</th>
            <td class="movie-genre">Action, Adventure, Fantasy, Sci-Fi</td>
          </tr>
          <tr>
            <th>Director</th>
            <td class="movie-director">George Lucas</td>
          </tr>
          <tr>
            <th>Actors</th>
            <td class="movie-actors">Mark Hamill, Harrison Ford, Carrie Fisher, Peter Cushing</td>
          </tr>
          <tr>
            <th>Awards</th>
            <td class="movie-actors">Won 6 Oscars. Another 50 wins & 28 nominations.</td>
          </tr>
          <tr>
            <th>Plot</th>
            <td class="movie-plot">Luke Skywalker joins forces with a Jedi Knight, a cocky pilot, a Wookiee and two droids to save the galaxy from the Empire's world-destroying battle station, while also attempting to rescue Princess Leia from the mysterious Darth Vader.</td>
          </tr>
        </tbody>
      </table>






      <!-- RENDER TABLE ONCE SEARCH DATA RECEIVED -->
      <table class="table table-hover table-dark">
        <thead>
          <tr id="movie-details">
            <th>Title</th>
            <th>Year</th>
            <th>Rated</th>
            <th>Director</th>
            <th>Plot</th>
            <th>RT</th>
            <th>IMDb</th>
            <th>Metacritic</th>
          </tr>
        </thead>
        <tbody>
          <tr class="movie-row">
            <th class="movie-title">Star Wars: Episode IV - A New Hope</td>
            <td class="movie-year">1977</td>
          <td class="movie-rated">PG</td>
          <td class="movie-director">George Lucas</td>
          <td class="movie-plot">Luke Skywalker joins forces with a Jedi Knight, a cocky pilot, 
            a Wookiee and two droids to save the galaxy from the Empire's world-destroying battle station, 
            while also attempting to rescue Princess Leia from the mysterious Darth Vader.</td>
            <td class="movie-rt">93%</td>
            <td class="movie-imdb">8.6/10</td>
            <td class="movie-metacritic">90/100</td>
          </tr>
        </tbody>
      </table>



    </main>

    <script>
      const movie = document.querySelectorAll('tr.movie-row')

      movie.forEach((result, i) => {
        result.addEventListener("click", () => console.log(`hello from position ${i}`));
      })

      const getForm = async (e) => {
        e.preventDefault();
        const movie = document.getElementById("movieSearch").value;

        let res = await fetch(
          // Send fetch request to API URL
          // with input value as search params in the URL.
          `http://localhost:3000/movies/search?movie=${movie}`
        );

        const data = await res.json();
        console.log(data);
      };

      const form = document.getElementById("form");
      form.addEventListener("submit", getForm);
    </script>
  </body>
</html>
